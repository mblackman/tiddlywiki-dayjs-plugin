title: Test:Dayjs
type: text/vnd.tiddlywiki
tags: $:/tags/Macro

\define test-case(label, date, format, expected)
<$set name="actual" value=<<dayjs "$date$" "$format$">>>
<tr>
  <td>$label$</td>
  <td><code>$date$</code></td>
  <td><code>$format$</code></td>
  <td>''<<actual>>''</td>
  <td>$expected$</td>
  <td>
    <$list filter="[<actual>match[$expected$]]" emptyMessage="@@color:red;❌ FAIL@@">
      @@color:green;✅ PASS@@
    </$list>
  </td>
</tr>
</$set>
\end

! Day.js Unit Tests

<table>
  <thead>
    <tr>
      <th style="width:20%">Test Case</th>
      <th style="width:15%">Input</th>
      <th style="width:15%">Format</th>
      <th style="width:20%">Actual</th>
      <th style="width:20%">Expected</th>
      <th style="width:10%">Status</th>
    </tr>
  </thead>
  <tbody>
    <<test-case "Standard ISO" "2025-12-25" "YYYY-MM-DD" "2025-12-25">>
    <<test-case "US Formatting" "2025-01-31" "MM/DD/YYYY" "01/31/2025">>
    <<test-case "Month Name" "2025-08-15" "D MMMM" "15 August">>

    <<test-case "Leap Year" "2024-02-29" "MM-DD" "02-29">>
    
    <<test-case "ISO Week Boundary" "2024-12-31" "WW" "01">>
    
    <<test-case "Year Boundary" "2024-12-31" "YYYY" "2024">>

    <<test-case "ISO Week-Year (Correct)" "2024-12-31" "WW-GGGG" "01-2025">>

    <<test-case "Calendar Year (Mismatch)" "2024-12-31" "WW-YYYY" "01-2024">>
  </tbody>
</table>

! Visual Checks (Non-Deterministic)

These depend on the current time and cannot be asserted against a static string.

* **Current Timestamp:** `<<dayjs>>`
* **Current Year:** `<<dayjs "" "YYYY">>`
* **Week Number:** `<<dayjs "" "WW">>`